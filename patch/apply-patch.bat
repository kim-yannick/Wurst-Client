@echo off
rem # Script for applying the Minecraft patch.
rem # Requires a repository with the Minecraft source code in the "mc" folder
rem # next to "src".
rem # Branches in that repo must be set up as follows:
rem # master: vanilla Minecraft code, as generated by the MCP.
rem # modded: modified Minecraft code, as generated by the apply-patch script.
rem # Before running this script, the "modded" branch must be created with
rem # "master" as its source.

cd ..\mc
git checkout master
git apply --ignore-space-change --ignore-whitespace ..\patch\minecraft.patch
xcopy ..\mc ..\tmp /E /Y /I
git reset --hard
git checkout modded
xcopy ..\tmp ..\mc /E /Y /I
rd /S /Q ..\tmp
rem pause